package O2::Dispatch::ModPerlGlobals::Cgi;

use strict;

use Tie::Scalar;
our @ISA = qw(Tie::StdScalar);

#------------------------------------------------------------------------------------------------------------
sub TIESCALAR {
  my ($className) = @_;
  return bless {}, $className;
}
#------------------------------------------------------------------------------------------------------------
sub FETCH {
  my ($obj) = @_;
  my $cgi = $obj->{ $ENV{O2REQUESTID} };
  if (!$cgi) {
    $cgi = $O2::context->getCgi();
    $obj->STORE($cgi);
  }
  return $cgi;
}
#------------------------------------------------------------------------------------------------------------
sub STORE {
  my ($obj, $cgi) = @_;
  $obj->{ $ENV{O2REQUESTID} } = $cgi;
}
#------------------------------------------------------------------------------------------------------------
sub DESTROY {
  my ($obj) = @_;
}
#------------------------------------------------------------------------------------------------------------
1;
