package O2::Dispatch::ModPerlGlobals::Config;

use strict;

use Tie::Scalar;
our @ISA = qw(Tie::StdScalar);

#------------------------------------------------------------------------------------------------------------
sub TIESCALAR {
  my ($className) = @_;
  return bless {}, $className;
}
#------------------------------------------------------------------------------------------------------------
sub FETCH {
  my ($obj) = @_;
  my $config = $obj->{ $ENV{O2REQUESTID} };
  if (!$config) {
    $config = $O2::context->getConfig();
    $obj->STORE($config);
  }
  return $config;
}
#------------------------------------------------------------------------------------------------------------
sub STORE {
  my ($obj, $config) = @_;
  $obj->{ $ENV{O2REQUESTID} } = $config;
}
#------------------------------------------------------------------------------------------------------------
sub DESTROY {
  my ($obj) = @_;
}
#------------------------------------------------------------------------------------------------------------
1;
