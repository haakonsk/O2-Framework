o2.escape = {};

o2.escape.getEncoding = function() {
  return 'iso-8859-1';
}

o2.escape.escape = function(str) {
    var translationTable = {
        " " : "+",
        "Å" : "%00",
        "" : "%01",
        "" : "%02",
        "" : "%03",
        "" : "%04",
        "" : "%05",
        "" : "%06",
        "" : "%07",
        "" : "%08",
        "\t" : "%09",
        "\n" : "%0a",
        "" : "%0b",
        "" : "%0c",
        "\r" : "%0d",
        "" : "%0e",
        "" : "%0f",
        "" : "%10",
        "" : "%11",
        "" : "%12",
        "" : "%13",
        "" : "%14",
        "" : "%15",
        "" : "%16",
        "" : "%17",
        "" : "%18",
        "" : "%19",
        "" : "%1a",
        "" : "%1b",
        "" : "%1c",
        "" : "%1d",
        "" : "%1e",
        "" : "%1f",
        //        " " : "%20", // Space
        "!" : "%21",
        '"' : "%22",
        "#" : "%23",
        "$" : "%24",
        "%" : "%25",
        "&" : "%26",
        "'" : "%27",
        "(" : "%28",
        ")" : "%29",
        "*" : "%2a",
        "+" : "%2b",
        "," : "%2c",
        "-" : "%2d",
        "." : "%2e",
        "/" : "%2f",
        ":" : "%3a",
        ";" : "%3b",
        "<" : "%3c",
        "=" : "%3d",
        ">" : "%3e",
        "?" : "%3f",
        "@" : "%40",
        "[" : "%5b",
        "\\": "%5c",
        "]" : "%5d",
        "^" : "%5e",
        "_" : "%5f",
        "`" : "%60",
        "{" : "%7b",
        "|" : "%7c",
        "}" : "%7d",
        "~" : "%7e",
        "" : "%7f",
        "Ä" : "%80",
        "Å" : "%81", // Used somewhere else
        "Ç" : "%82",
        "É" : "%83",
        "Ñ" : "%84",
        "Ö" : "%85",
        "Ü" : "%86",
        "á" : "%87",
        "à" : "%88",
        "â" : "%89",
        "ä" : "%8a",
        "ã" : "%8b",
        "å" : "%8c",
        "ç" : "%8d",
        "é" : "%8e",
        "è" : "%8f",
        "ê" : "%90",
        "ë" : "%91",
        "í" : "%92",
        "ì" : "%93",
        "î" : "%94",
        "ï" : "%95",
        "ñ" : "%96",
        "ó" : "%97",
        "ò" : "%98",
        "ô" : "%99",
        "ö" : "%9a",
        "õ" : "%9b",
        "ú" : "%9c",
        "ù" : "%9d",
        "û" : "%9e",
        "ü" : "%9f",
        "†" : "%a0", // No-break space
        "°" : "%a1",
        "¢" : "%a2",
        "£" : "%a3",
        "§" : "%a4",
        "•" : "%a5",
        "¶" : "%a6",
        "ß" : "%a7",
        "®" : "%a8",
        "©" : "%a9",
        "™" : "%aa",
        "´" : "%ab",
        "¨" : "%ac",
        "≠" : "%ad",
        "Æ" : "%ae",
        "Ø" : "%af",
        "∞" : "%b0",
        "±" : "%b1",
        "≤" : "%b2",
        "≥" : "%b3",
        "¥" : "%b4",
        "µ" : "%b5",
        "∂" : "%b6",
        "∑" : "%b7",
        "∏" : "%b8",
        "π" : "%b9",
        "∫" : "%ba",
        "ª" : "%bb",
        "º" : "%bc",
        "Ω" : "%bd",
        "æ" : "%be",
        "ø" : "%bf",
        "¿" : "%c0",
        "¡" : "%c1",
        "¬" : "%c2",
        "√" : "%c3",
        "ƒ" : "%c4",
        "≈" : "%c5",
        "∆" : "%c6",
        "«" : "%c7",
        "»" : "%c8",
        "…" : "%c9",
        " " : "%ca",
        "À" : "%cb",
        "Ã" : "%cc",
        "Õ" : "%cd",
        "Œ" : "%ce",
        "œ" : "%cf",
        "–" : "%d0",
        "—" : "%d1",
        "“" : "%d2",
        "”" : "%d3",
        "‘" : "%d4",
        "’" : "%d5",
        "÷" : "%d6",
        "◊" : "%d7",
        "ÿ" : "%d8",
        "Ÿ" : "%d9",
        "⁄" : "%da",
        "€" : "%db",
        "‹" : "%dc",
        "›" : "%dd",
        "ﬁ" : "%de",
        "ﬂ" : "%df",
        "‡" : "%e0",
        "·" : "%e1",
        "‚" : "%e2",
        "„" : "%e3",
        "‰" : "%e4",
        "Â" : "%e5",
        "Ê" : "%e6",
        "Á" : "%e7",
        "Ë" : "%e8",
        "È" : "%e9",
        "Í" : "%ea",
        "Î" : "%eb",
        "Ï" : "%ec",
        "Ì" : "%ed",
        "Ó" : "%ee",
        "Ô" : "%ef",
        "" : "%f0",
        "Ò" : "%f1",
        "Ú" : "%f2",
        "Û" : "%f3",
        "Ù" : "%f4",
        "ı" : "%f5",
        "ˆ" : "%f6",
        "˜" : "%f7",
        "¯" : "%f8",
        "˘" : "%f9",
        "˙" : "%fa",
        "˚" : "%fb",
        "¸" : "%fc",
        "˝" : "%fd",
        "˛" : "%fe",
        "ˇ" : "%ff"
    };
    var resultString = "";
    if (!str) {
      return "";
    }
    for (var i = 0; i < str.length; i++) {
        var char = str.substring(i, i+1);
        if (translationTable[char]) {
            resultString += translationTable[char];
        }
        else {
            resultString += char;
        }
    }
    // alert(resultString);
    return resultString;
}

o2.escape.unescape = function(encoded) {
  return unescape(encoded);
}
